---
sidebar_position: 6
---
## 浏览器安全及防范
### XSS 攻击
def: 跨站脚本攻击，攻击者通过向用户网站嵌入脚本，执行恶意脚本，从而达到攻击目的
#### 攻击形式具有以下三种:
1. 反射XSS（reflected xss）: 注入恶意链接，诱导攻击者点击
2. 存储型 XSS（stored xss）：攻击代码存储到服务器中，每当访问服务器的时候，会触发这类代码，可以盗取不同用户 cookie
3. DOM 型 XSS：通过更改 DOM 树实现
攻击方法则不外乎是通过执行 script 脚本或者把恶意脚本通过可输入组件或者从 URL 带上 script 实现脚本注入
```
// 输入框
我是个恶意脚本<script> window.alert('我是病毒')</script>

// 更改 DOM
加入image <img scr="http:xxxx" />
```
#### 防御措施
1. 把提交的字符 < 、>、 % 、""、''、+、/ 进行转义，可以把 script 标签这些给转换掉
2. cookie 设置 http-only（不能通过 JS 来访问）
3. 严格的 CSP (content-secure-policy) 进行限制，在 meta 处进行设置，参考https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP
4. 对于输入框，设置合理长度、字符类型等
### CSRF 攻击
def: 跨站伪造请求，用户不知情下，利用用户权限（cookie），伪造用户发请求
实例：小明在银行网站A 转账，黑客从 A 获取到小明发送的 cookie。此时黑客可以拿着小明的 cookie 向 A 的后台发送请求，伪造小明的请求给黑客账户转账
#### 防御措施
既然是通过伪造用户请求来进行攻击，那么只需要确认用户本人操作即可
1. 短信验证码
2. token 验证 
3. 同源检测：Origin 和 Referer 验证。浏览器限制对 referer 改动，所以发送请求的网站都会在 referer 看到，所以服务器可以对其判断是否响应该请求
4. Same-site 设置
### SQL 注入
Def: 主要是用户通过发送请求 SQL 参数恶意注入，通过在 server 端拼接 SQL 对数据库进行增删查改。
#### 防御措施
1. 分级管理，控制用户权限，对系统管理员才有对数据库增删查改的权利
2. 正则表达式拦截请求，将 SQL 语句进行过滤
3. 隐藏数据库错误信息，可以用户通过返回错误信息进行数据库字段信息判断
### DDOS
Def: 短时间内，僵尸设备大量向服务器发送请求，使得服务器不能响应全部请求，导致请求堆积，消耗大量带宽，出现雪崩效应
这里的原理主要是通过 tcp 对收到 server 响应不予以回应，导致 server 不断发送报文进行确认，这个时候因为没有完成连接，所以不能够释放连接，同时又到达了最大连接数，这个时候会出现崩溃。
#### 防御措施
这个时候不外乎是过滤和抗量
1. 流量管制：负载均衡、API 网关、CDN
2. 快速自动扩容
3. 非核心服务降级
有一种情况是静态资源被劫持了，比如 CDN 静态资源被篡改，可以利用 SRI 来防范
### 中间人攻击
http 是明文传输，也就是说
1. 中间人可以通过抓取 http 报文，查看传输内容
2. 信息被篡改不可知
3. 对方的身份无法验证
#### 防御措施
1. 利用 https 对报文进行加密（TLS + HTTP）
> Https 有以下特性：
> 可靠性：加密
> 不可抵赖性：数字签名
当然假若算法不够健壮时候，数字签名可能被暴力破解。所以说成也证书，败也证书。